<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Mini FPS Auto Start</title>
</head>
<body style="margin:0; overflow:hidden;">

<script src="https://cdn.jsdelivr.net/npm/three@0.158.0/build/three.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.158.0/examples/js/controls/PointerLockControls.js"></script>

<script>
window.addEventListener('DOMContentLoaded', function(){

    // ===== Scene, Camera, Renderer =====
    var scene = new THREE.Scene();
    scene.background = new THREE.Color(0x87ceeb);

    var camera = new THREE.PerspectiveCamera(75, window.innerWidth/window.innerHeight, 0.1, 1000);
    camera.position.set(0,2,5);

    var renderer = new THREE.WebGLRenderer({antialias:true});
    renderer.setSize(window.innerWidth, window.innerHeight);
    document.body.appendChild(renderer.domElement);

    // ===== Light =====
    scene.add(new THREE.AmbientLight(0xffffff,1));
    var dirLight = new THREE.DirectionalLight(0xffffff,0.7);
    dirLight.position.set(10,20,10);
    scene.add(dirLight);

    // ===== Ground =====
    var ground = new THREE.Mesh(
        new THREE.PlaneGeometry(100,100),
        new THREE.MeshPhongMaterial({color:0x556B2F})
    );
    ground.rotation.x = -Math.PI/2;
    scene.add(ground);

    // ===== Obstacles =====
    var obstacles = [];
    function addObstacle(x,z,w=2,h=3,d=2,color=0x8B4513){
        var box = new THREE.Mesh(new THREE.BoxGeometry(w,h,d), new THREE.MeshPhongMaterial({color:color}));
        box.position.set(x,h/2,z);
        scene.add(box);
        obstacles.push(box);
    }
    addObstacle(10,10,3,4,3);
    addObstacle(-15,5,3,4,3,0xA0522D);
    addObstacle(0,-20,5,5,5,0x654321);
    addObstacle(-25,-15,4,3,2);
    addObstacle(20,-10,3,3,3,0xA0522D);

    // ===== Player =====
    var playerObj = new THREE.Object3D();
    playerObj.position.set(0,2,5);
    scene.add(playerObj);

    // ===== Controls =====
    var controls = new THREE.PointerLockControls(camera, renderer.domElement);
    scene.add(controls.getObject());

    // Klik canvas untuk lock pointer
    renderer.domElement.addEventListener('click', function(){
        controls.lock();
    }, {once:true});

    // ===== Animate =====
    function animate(){
        requestAnimationFrame(animate);
        renderer.render(scene,camera);
    }
    animate();

    // ===== Resize =====
    window.addEventListener("resize",function(){
        camera.aspect = window.innerWidth/window.innerHeight;
        camera.updateProjectionMatrix();
        renderer.setSize(window.innerWidth, window.innerHeight);
    });

});
</script>

</body>
</html>
